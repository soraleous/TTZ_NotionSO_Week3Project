<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>TTZ Notion.SO Week 3 Project</title>

    <!-- Bootstrap added here -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
          crossorigin="anonymous">

    <!-- Load Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <!-- Load Jquery hotkeys and others (To make the editor work correctly) -->
    <script src="Scripts/jquery.hotkeys.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>

    <!-- Load custom CSS -->
    <link href="CSS/styles.css" rel="stylesheet" />
    <!-- Load bootstrap-wysiwyg notepad script-->
    <script src="Scripts/script.js"></script>
    <!-- FontAwesome Kit for icons -->
    <script src="https://kit.fontawesome.com/559e5aa8db.js" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Objective is to create a Notepad/Wordpad Javascript based website -->
    <!--
        Code adapted from the following sources: -
        https://www.thatsoftwaredude.com/content/8912/create-a-basic-text-editor-in-javascript
        https://mindmup.github.io/bootstrap-wysiwyg/
        https://blog.logrocket.com/build-a-google-doc-clone-with-html-css-and-javascript/
        https://github.com/mindmup/bootstrap-wysiwyg
        -->
    <div class="container text-center py-1">
        <h1>TTZ Notepad + Bootstrap Project</h1>
    </div>

    <!-- Main Toolbar -->
    <div class="toolbar container border p-2">
        <!-- Button Groups Guide: https://getbootstrap.com/docs/5.0/components/button-group/ -->
        <!-- Button Toolbar Set -->
        <div class="btn-toolbar justify-content-center" data-role="editor-toolbar" data-target="#editor" role="toolbar" aria-label="Toolbar with Button Groups">
            <!-- Text Font Button Group -->
            <div class="btn-group m-1" role="group" aria-label="Text Font Group">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-font"></i>
                        <span class="selection">Helvetica</span>
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                        <li><a class="dropdown-item" data-edit="fontName Arial" style="font-family:'Arial'">Arial</a></li>
                        <li><a class="dropdown-item" data-edit="fontName Arial Black" style="font-family:'Arial Black'">Arial Black</a></li>
                        <li><a class="dropdown-item" data-edit="fontName Courier" style="font-family:'Courier'">Courier</a></li>
                        <li><a class="dropdown-item" data-edit="fontName Courier New" style="font-family:'Courier New'">Courier New</a></li>
                        <li><a class="dropdown-item" data-edit="fontName Comic Sans MS" style="font-family:'Comic Sans MS'">Comic Sans MS</a></li>
                        <li><a class="dropdown-item" data-edit="fontName Helvetica" style="font-family:'Helvetica'">Helvetica</a></li>
                        <li><a class="dropdown-item" data-edit="fontName Impact" style="font-family:'Impact'">Impact</a></li>
                        <li><a class="dropdown-item" data-edit="fontName Lucida Grande" style="font-family:'Lucida Grande'">Lucida Grande</a></li>
                        <li><a class="dropdown-item" data-edit="fontName Lucida Sans" style="font-family:'Lucida Sans'">Lucida Sans</a></li>
                        <li><a class="dropdown-item" data-edit="fontName Serif" style="font-family:'Serif'">Serif</a></li>
                        <li><a class="dropdown-item" data-edit="fontName Sans" style="font-family:'Sans'">Sans</a></li>
                        <li><a class="dropdown-item" data-edit="fontName Tahoma" style="font-family:'Tahoma'">Tahoma</a></li>
                        <li><a class="dropdown-item" data-edit="fontName Times New Roman" style="font-family:'Times New Roman'">Times New Roman</a></li>
                        <li><a class="dropdown-item" data-edit="fontName Verdana" style="font-family:'Verdana'">Verdana</a></li>
                    </ul>
                </div>
            </div>
            <!-- End of Text Font Button Group -->
            <!-- Text Size Button Group -->
            <div class="btn-group m-1" role="group" aria-label="Text Size Group">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-text-height"></i>
                        <span class="selection">Normal</span>
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
                        <li><a class="dropdown-item" data-edit="fontSize 5"><font size="5">Huge</font></a></li>
                        <li><a class="dropdown-item" data-edit="fontSize 3"><font size="3">Normal</font></a></li>
                        <li><a class="dropdown-item" data-edit="fontSize 1"><font size="1">Small</font></a></li>
                    </ul>
                </div>
            </div>
            <!-- End of Text Size Button Group -->
            <!-- Text Appearance Button Group -->
            <div class="btn-group m-1" role="group" aria-label="Text Appearance Group">
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="bold" title="Bold (CTRL+B)" aria-hidden="true">
                    <i class="fas fa-bold"></i>
                </a>
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="italic" title="Italic (CTRL+I)" aria-hidden="true">
                    <i class="fas fa-italic"></i>
                </a>
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="underline" title="Underline (CTRL+U)" aria-hidden="true">
                    <i class="fas fa-underline"></i>
                </a>
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="strikethrough" title="Strikethrough" aria-hidden="true">
                    <i class="fas fa-strikethrough"></i>
                </a>
            </div>
            <!-- End of Text Appearance Button Group -->
            <!-- Text Justification Button Group -->
            <div class="btn-group m-1" role="group" aria-label="Text Justification Group">
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="justifyleft" title="Align Left" aria-hidden="true">
                    <i class="fas fa-align-left"></i>
                </a>
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="justifycenter" title="Align Center" aria-hidden="true">
                    <i class="fas fa-align-center"></i>
                </a>
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="justifyright" title="Align Right" aria-hidden="true">
                    <i class="fas fa-align-right"></i>
                </a>
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="justifyfull" title="Justify" aria-hidden="true">
                    <i class="fas fa-align-justify"></i>
                </a>
            </div>
            <!-- End of Text Justification Button Group -->
            <!-- Lists/Indent Button Group -->
            <div class="btn-group m-1" role="group" aria-label="Lists/Indent Group">
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="insertorderedlist" title="Number List" aria-hidden="true">
                    <i class="fas fa-list-ol"></i>
                </a>
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="insertunorderedlist" title="Bullet List" aria-hidden="true">
                    <i class="fas fa-list-ul"></i>
                </a>
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="indent" title="Indent (TAB)" aria-hidden="true">
                    <i class="fas fa-indent"></i>
                </a>
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="outdent" title="Reduce Indent (SHIFT+TAB)" aria-hidden="true">
                    <i class="fas fa-indent mirror1"></i>
                </a>
            </div>
            <!-- End of Lists/Indent Button Group -->
            <!-- Links/Image Link Button Group -->
            <div class="btn-group m-1" role="group" aria-label="Links/Image Link Group">
                <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-link"></i></a>
                <div class="dropdown-menu text-center p-2" aria-labelledby="dropdownMenuLink">
                    <div class="input-group">
                        <input class="form-control" placeholder="URL" type="text" data-edit="createLink" />
                        <button class="btn btn-primary" type="button">Add</button>
                    </div>
                </div>
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="unlink" title="Remove Hyperlink" aria-hidden="true">
                    <i class="fas fa-unlink"></i>
                </a>
                <a id="pictureBtn" class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="Insert Image (or Drag & Drop)" aria-hidden="true">
                    <i class="fas fa-file-image"></i>
                    <input type="file" data-role="magic-overlay" role="button" data-target="#pictureBtn" data-edit="insertImage" />
                </a>
            </div>
            <!-- End of Links/Image Link Button Group -->
            <!-- Undo/Redo Button Group -->
            <div class="btn-group m-1" role="group" aria-label="Undo/Redo Group">
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="undo" title="Undo (CTRL+Z)" aria-hidden="true">
                    <i class="fas fa-undo-alt"></i>
                </a>
                <a class="btn btn-secondary" role="button" data-bs-toggle="tooltip" data-bs-placement="top" data-edit="redo" title="Redo (CTRL+Y)" aria-hidden="true">
                    <i class="fas fa-redo-alt"></i>
                </a>
            </div>
            <!-- End of Undo/Redo Button Group -->

        </div>
        <!-- End Button Toolbar Set -->
    </div>
    <!-- End of Main Toolbar -->
    <!-- Text Editor -->
    <div style="height: 800px" class="container border py-2">
        <div class="row justify-content-center h-100 p-1">
            <div id="editor" class="w-75 h-100 overflow-auto bg-white shadow p-3"
                 contenteditable="true" place-text="Type here"></div>
        </div>
    </div>

    <!-- End of Text Editor -->
    <!-- Bootstrap Bundle with Popper (Make sure this is above the end body tag) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous">
    </script>
    <!-- For Tooltips, From: https://getbootstrap.com/docs/5.0/components/tooltips/#example-enable-tooltips-everywhere -->
    <script>
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl)
        })
    </script>
    <!-- Script to initialize toolbars and others -->
    <script>
        $(function () {
            function initToolbarBootstrapBindings() {
                var fonts = ['Serif', 'Sans', 'Arial', 'Arial Black', 'Courier',
                    'Courier New', 'Comic Sans MS', 'Helvetica', 'Impact', 'Lucida Grande', 'Lucida Sans', 'Tahoma', 'Times',
                    'Times New Roman', 'Verdana'],
                    fontTarget = $('[title=Font]').siblings('.dropdown-menu');
                $.each(fonts, function (idx, fontName) {
                    fontTarget.append($('<li><a data-edit="fontName ' + fontName + '" style="font-family:\'' + fontName + '\'">' + fontName + '</a></li>'));
                });
                $('a[title]').tooltip({ container: 'body' });
                $('.dropdown-menu input').click(function () { return false; })
                    .change(function () { $(this).parent('.dropdown-menu').siblings('.dropdown-toggle').dropdown('toggle'); })
                    .keydown('esc', function () { this.value = ''; $(this).change(); });

                $('[data-role=magic-overlay]').each(function () {
                    var overlay = $(this), target = $(overlay.data('target'));
                    overlay.css('opacity', 0).css('position', 'absolute').offset(target.offset()).width(target.outerWidth()).height(target.outerHeight());
                });
                if ("onwebkitspeechchange" in document.createElement("input")) {
                    var editorOffset = $('#editor').offset();
                    $('#voiceBtn').css('position', 'absolute').offset({ top: editorOffset.top, left: editorOffset.left + $('#editor').innerWidth() - 35 });
                } else {
                    $('#voiceBtn').hide();
                }
            };
            function showErrorAlert(reason, detail) {
                var msg = '';
                if (reason === 'unsupported-file-type') { msg = "Unsupported format " + detail; }
                else {
                    console.log("error uploading file", reason, detail);
                }
                $('<div class="alert"> <button type="button" class="close" data-dismiss="alert">&times;</button>' +
                    '<strong>File upload error</strong> ' + msg + ' </div>').prependTo('#alerts');
            };
            initToolbarBootstrapBindings();
            $('#editor').wysiwyg({ fileUploadError: showErrorAlert });
            window.prettyPrint && prettyPrint();
        });
    </script>
    <!-- This script shows which drop down selection for the selected text font (Does not actively change it for now)-->
    <!-- Code obtained from https://stackoverflow.com/a/20526159 -->
    <script>
        $(".dropdown-menu li a").click(function () {
            $(this).parents(".btn-group").find('.selection').text($(this).text());
            $(this).parents(".btn-group").find('.selection').val($(this).text());
        });
    </script>
</body>
</html>